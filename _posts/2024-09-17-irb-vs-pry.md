---
layout: post
subtitle: <div id="terminal"></div>
title:  "IRB vs Pry: –∫—Ç–æ —Ç–≤–æ–π –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –¥—Ä—É–≥"
rate: 3
tags: Ruby,–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–æ–Ω—Å–æ–ª—å,IRB,Pry,–æ—Ç–ª–∞–¥–∫–∞,—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
version: 3.2.2
date:   2024-09-18 12:00:00 +0300
categories:
  - tools
  - ruby
hero_image: /images/posts/23.jpg
hero_darken: true
toc: true
menubar_toc: true
---

–ö–∞–∂–¥—ã–π Ruby-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –∑–Ω–∞–µ—Ç: –∫–æ–≥–¥–∞ –∫–æ–¥ –≤–µ–¥—ë—Ç —Å–µ–±—è –∫–∞–∫ –∫–∞–ø—Ä–∏–∑–Ω—ã–π –ø–æ–¥—Ä–æ—Å—Ç–æ–∫, **–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–æ–Ω—Å–æ–ª—å** ‚Äî –ø–æ—Å–ª–µ–¥–Ω–∏–π –æ–ø–ª–æ—Ç –∑–¥—Ä–∞–≤–æ–º—ã—Å–ª–∏—è. –ù–æ –∫–∞–∫–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤—ã–±—Ä–∞—Ç—å: —Å—Ç–∞—Ä—ã–π –¥–æ–±—Ä—ã–π IRB –∏–ª–∏ —Ö–∞—Ä–∏–∑–º–∞—Ç–∏—á–Ω—ã–π Pry? –†–∞–∑–±–µ—Ä—ë–º—Å—è –Ω–∞ –ø—Ä–∏–º–µ—Ä–∞—Ö, –±–æ–ª–∏ –∏ –¥–∞–∂–µ –Ω–µ–º–Ω–æ–≥–æ —Ñ–∏–ª–æ—Å–æ—Ñ–∏–∏.

---

## üß† –¢–µ–æ—Ä–∏—è: –∑–∞—á–µ–º –≤–æ–æ–±—â–µ –Ω—É–∂–Ω—ã REPL?

REPL (Read-Eval-Print Loop) ‚Äî —ç—Ç–æ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —Å—Ä–µ–¥–∞, –≥–¥–µ –º–æ–∂–Ω–æ:
- **–ë—ã—Å—Ç—Ä–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–¥–µ—é** –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤
- **–û—Ç–ª–∞–∂–∏–≤–∞—Ç—å –∫–æ–¥** –∫–∞–∫ —Ö–∏—Ä—É—Ä–≥ —Å –ª—É–ø–æ–π
- **–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã** –Ω–∞ –ª–µ—Ç—É

–í Ruby –µ—Å—Ç—å –¥–≤–∞ –≥–ª–∞–≤–Ω—ã—Ö –∏–≥—Ä–æ–∫–∞:

|               | IRB                     | Pry                    |
|---------------|-------------------------|------------------------|
| **–°—Ç–∞–Ω–¥–∞—Ä—Ç**  | –í—Å—Ç—Ä–æ–µ–Ω –≤ Ruby          | –¢—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏      |
| **–§–∏–ª–æ—Å–æ—Ñ–∏—è** | "–ú–∏–Ω–∏–º–∞–ª–∏–∑–º"           | "–î–∞–π—Ç–µ –º–Ω–µ –≤—Å—ë!"       |
| **–°—É–ø–µ—Ä—Å–∏–ª–∞** | –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å              | –ò–Ω—Ç—Ä–æ—Å–ø–µ–∫—Ü–∏—è           |

---

## üîß –ü—Ä–∞–∫—Ç–∏–∫–∞: –±–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### IRB: –∫–∞–∫ —Å—Ç–∞—Ä—ã–π –¥—Ä—É–≥

```ruby
# –ó–∞–ø—É—Å–∫
$ irb

# –ü—Ä–æ—Å—Ç–µ–π—à–∏–π –ø—Ä–∏–º–µ—Ä
irb(main):001> 2 + 2
=> 4

# –†–∞–±–æ—Ç–∞ —Å –∫–ª–∞—Å—Å–∞–º–∏
irb(main):002> class Foo; def bar; "baz"; end; end
=> :bar
```

### Pry: –∫–∞–∫ —à–≤–µ–π—Ü–∞—Ä—Å–∫–∏–π –Ω–æ–∂

```ruby
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞
$ gem install pry

# –ó–∞–ø—É—Å–∫ —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π
$ pry

# –¢–æ –∂–µ —Å–ª–æ–∂–µ–Ω–∏–µ, –Ω–æ —Å —Ü–≤–µ—Ç–∞–º–∏
[1] pry(main)> 2 + 2
=> 4

# –ü–ª—é—Å –º–∞–≥–∏—è –∏–Ω—Ç—Ä–æ—Å–ø–µ–∫—Ü–∏–∏
[2] pry(main)> ls Hash
```

---

## üí° –ö–ª—é—á–µ–≤—ã–µ –æ—Ç–ª–∏—á–∏—è

### 1. –ò–Ω—Ç—Ä–æ—Å–ø–µ–∫—Ü–∏—è –æ–±—ä–µ–∫—Ç–æ–≤

**Pry –ø–æ–±–µ–∂–¥–∞–µ—Ç** —Å —Ä–∞–∑–≥—Ä–æ–º–Ω—ã–º —Å—á—ë—Ç–æ–º:

```ruby
# –ü—Ä–æ—Å–º–æ—Ç—Ä –º–µ—Ç–æ–¥–æ–≤ –æ–±—ä–µ–∫—Ç–∞
pry(main)> cd ActiveRecord::Base
pry(ActiveRecord::Base):1> ls -M

# –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞
pry(main)> show-method User#save
```

–í IRB –¥–ª—è —ç—Ç–æ–≥–æ –ø—Ä–∏–¥—ë—Ç—Å—è –ø–∏—Å–∞—Ç—å `User.instance_methods.sort` –∏ —Ä—ã—Ç—å—Å—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

### 2. –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å—Ç–µ–∫—É –≤—ã–∑–æ–≤–æ–≤

–ö–æ–≥–¥–∞ –≤—Å—ë –ø–∞–¥–∞–µ—Ç, Pry —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥–µ—Ç–µ–∫—Ç–∏–≤–æ–º:

```ruby
def problematic_method
  binding.pry # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–¥–µ—Å—å
  some_buggy_code
end

# –í –∫–æ–Ω—Å–æ–ª–∏ Pry:
pry(main)> whereami  # –ü–æ–∫–∞–∂–µ—Ç —Ç–µ–∫—É—â–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
pry(main)> up        # –ü–æ–¥–Ω—è—Ç—å—Å—è –ø–æ —Å—Ç–µ–∫—É
pry(main)> down      # –û–ø—É—Å—Ç–∏—Ç—å—Å—è –æ–±—Ä–∞—Ç–Ω–æ
```

IRB –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ª–∏—à—å `caller`, —á—Ç–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ —á—Ç–µ–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–Ω–æ–π –∫–Ω–∏–≥–∏ –±–µ–∑ –æ—á–∫–æ–≤.

---

## ÔøΩ –ë–æ–ª—å –∏ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã

### –ö–æ–≥–¥–∞ Pry –º–æ–∂–µ—Ç –Ω–∞–≤—Ä–µ–¥–∏—Ç—å

1. **–í production**  
   –û—Å—Ç–∞–≤–∏—Ç—å `binding.pry` –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ ‚Äî –∫–∞–∫ –∑–∞–±—ã—Ç—å –≤–∫–ª—é—á–∏—Ç—å —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏—é –≤ —é–≤–µ–ª–∏—Ä–Ω–æ–º. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `pry-remote` –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ.

2. **–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –ø–æ—Ç–æ–∫–∞–º–∏**  
   Pry –∏–Ω–æ–≥–¥–∞ –≤–µ–¥—ë—Ç —Å–µ–±—è –∫–∞–∫ –∫–æ—Ç –≤ –∫–æ–º–Ω–∞—Ç–µ —Å —à–∞—Ä–∞–º–∏ ‚Äî –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ.

3. **–ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å**  
   –ó–∞–ø—É—Å–∫ Pry —Å –∫—É—á–µ–π –ø–ª–∞–≥–∏–Ω–æ–≤ (`pry-rails`, `pry-doc`, `pry-byebug`) –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω–µ–µ IRB.

### –ö–æ–≥–¥–∞ IRB –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ

```ruby
# –ü–æ–ø—ã—Ç–∫–∞ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç –≤ IRB
irb(main)> user = User.first
irb(main)> user.methods.grep(/name/) # –û—Ö...

# –¢–æ –∂–µ –≤ Pry
pry(main)> user = User.first
pry(main)> cd user
pry(#<User>):1> ls -M | grep name
```

---

## üõ† –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Rails

### Pry + Rails = ‚ù§Ô∏è

–î–æ–±–∞–≤—å—Ç–µ –≤ `Gemfile`:

```ruby
group :development do
  gem 'pry-rails'
  gem 'pry-byebug'
end
```

–¢–µ–ø–µ—Ä—å:
- `rails console` –∑–∞–ø—É—Å–∫–∞–µ—Ç Pry –≤–º–µ—Å—Ç–æ IRB
- –û—Ç–ª–∞–¥–∫–∞ —Å –ø–æ—à–∞–≥–æ–≤—ã–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º (`next`, `step`)
- –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏

### IRB: –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –ø–æ–¥—Ö–æ–¥

–•–æ—Ç–∏—Ç–µ "–≤–∞–Ω–∏–ª—å–Ω—ã–π" –æ–ø—ã—Ç? –í `.irbrc` –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:

```ruby
# –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ Rails-–æ–∫—Ä—É–∂–µ–Ω–∏—è
if defined?(Rails)
  require 'rails/console/app'
  require 'rails/console/helpers'
end
```

–ù–æ –≥–æ—Ç–æ–≤—å—Ç–µ—Å—å –∫ —Ä—É—á–Ω–æ–º—É —Ç—Ä—É–¥—É.

---

## üé§ –ß—Ç–æ —Å–∫–∞–∑–∞—Ç—å –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏

> ‚Äî –ü–æ—á–µ–º—É –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Pry –≤–º–µ—Å—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ IRB?

‚Äî –î–ª—è —Å–ª–æ–∂–Ω–æ–π –æ—Ç–ª–∞–¥–∫–∏ Pry –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —É—Ä–æ–≤–Ω—è "–Ω–µ–π—Ä–æ—Ö–∏—Ä—É—Ä–≥–∏—è": –Ω–∞–≤–∏–≥–∞—Ü–∏—é –ø–æ —Å—Ç–µ–∫—É, –∏–Ω—Ç—Ä–æ—Å–ø–µ–∫—Ü–∏—é –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –ø–ª–∞–≥–∏–Ω—ã. –•–æ—Ç—è –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á –∏–Ω–æ–≥–¥–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ IRB ‚Äî –∫–∞–∫ —à–≤–µ–π—Ü–∞—Ä—Å–∫–∏–π –Ω–æ–∂ –ø—Ä–æ—Ç–∏–≤ —Å–∫–∞–ª—å–ø–µ–ª—è.

---

## ÔøΩ –†–µ–∞–ª—å–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –∏–∑ –ø—Ä–∞–∫—Ç–∏–∫–∏

**–°—Ü–µ–Ω–∞—Ä–∏–π**: –í production –ø–∞–¥–∞–µ—Ç —Ñ–æ–Ω–æ–≤—ã–π –¥–∂–æ–±, –Ω–æ –ª–æ–≥ –≥–æ–≤–æ—Ä–∏—Ç –ª–∏—à—å "undefined method for nil:NilClass".  

**IRB-–ø–æ–¥—Ö–æ–¥**:
1. –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏ –≤ 10 –º–µ—Å—Ç
2. –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å
3. –ñ–¥–∞—Ç—å —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø–∞–¥–µ–Ω–∏—è
4. –ü–æ–≤—Ç–æ—Ä—è—Ç—å 5 —Ä–∞–∑

**Pry-—Ä–µ—à–µ–Ω–∏–µ**:
```ruby
def perform
  # ...
  binding.remote_pry if Rails.env.production? # –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è —á–µ—Ä–µ–∑ pry-remote
  problematic_code
end
```

–ò —Å—Ä–∞–∑—É –≤–∏–¥–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –≤ –º–æ–º–µ–Ω—Ç –ø–∞–¥–µ–Ω–∏—è. **–í—Ä–µ–º—è –Ω–∞ —Ä–µ—à–µ–Ω–∏–µ**: 15 –º–∏–Ω—É—Ç –ø—Ä–æ—Ç–∏–≤ 2 —á–∞—Å–æ–≤.

---

## üßæ –í—ã–≤–æ–¥

–í—ã–±–∏—Ä–∞–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ–¥ –∑–∞–¥–∞—á—É:
- **IRB** ‚Äî –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –∏ "—á–∏—Å—Ç–æ–≥–æ" Ruby
- **Pry** ‚Äî –¥–ª—è —Å–ª–æ–∂–Ω–æ–π –æ—Ç–ª–∞–¥–∫–∏ –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
