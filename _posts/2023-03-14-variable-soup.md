---
layout: post
subtitle: <div id="terminal"></div>
title:  "Ruby: –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ @, @@ –∏ $ ‚Äî –±–æ–ª—å, –ø–∞–º—è—Ç—å –∏ –ø—Ä–æ—Å–≤–µ—Ç–ª–µ–Ω–∏–µ"
date:   2023-03-14 13:00:00 +0300
rate: 3
tags: Ruby,–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ,–æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏,—ç–∫–∑–µ–º–ø–ª—è—Ä,–∫–ª–∞—Å—Å,–≥–ª–æ–±–∞–ª—å–Ω—ã–µ
version: A49X3
categories:
  - ruby
toc: true
menubar_toc: true
hero_image: /images/ruby.jpg
hero_darken: true
---
–í Ruby –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å —Ä–∞–∑–Ω—ã–º–∏ –ø—Ä–µ—Ñ–∏–∫—Å–∞–º–∏ (`@`, `@@`, `$`) –≤–µ–¥—É—Ç —Å–µ–±—è –ø–æ-—Ä–∞–∑–Ω–æ–º—É, –∏ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∏—Ö –æ–±–ª–∞—Å—Ç–µ–π –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è —á–∏—Å—Ç–æ–≥–æ –∫–æ–¥–∞. –í —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ —Ä–∞–∑–±–µ—Ä—ë–º—Å—è, —á–µ–º –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞, –∫–ª–∞—Å—Å–∞ –∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ, –∫–∞–∫ –æ–Ω–∏ –≤–ª–∏—è—é—Ç –Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –ø–æ—á–µ–º—É `@@` –ª—É—á—à–µ –∏–∑–±–µ–≥–∞—Ç—å. –û—Å–æ–±–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ —É–¥–µ–ª–∏–º –ø–æ–¥–≤–æ–¥–Ω—ã–º –∫–∞–º–Ω—è–º, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ–º –∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏.

–ï—Å–ª–∏ —Ç—ã –∫–æ–≥–¥–∞-—Ç–æ –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏ –ø–µ—Ä–µ–ø—É—Ç–∞–ª `@`, `@@` –∏ `$`, –∑–Ω–∞–π: —Ç—ã –Ω–µ –æ–¥–∏–Ω.  
–°–µ–≥–æ–¥–Ω—è –º—ã —Ä–∞—Å—Å—Ç–∞–≤–∏–º –≤—Å—ë –ø–æ –ø–æ–ª–æ—á–∫–∞–º (–∏ —Å–º–∞—Ö–Ω—ë–º –ø—ã–ª—å —Å `@@`).

---

## ü•∏ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ Ruby ‚Äî –≤ –ª–∏—Ü–∞—Ö

| –í–∏–¥ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π  | –°–∏–Ω—Ç–∞–∫—Å–∏—Å | –ì–¥–µ –∂–∏–≤—ë—Ç                              | –í–∏–¥–∏–º–æ—Å—Ç—å              |
|------------------|-----------|----------------------------------------|------------------------|
| –õ–æ–∫–∞–ª—å–Ω–∞—è         | `x`       | –í–Ω—É—Ç—Ä–∏ –º–µ—Ç–æ–¥–∞/–±–ª–æ–∫–∞                    | —Ç–æ–ª—å–∫–æ —Ç–∞–º             |
| –≠–∫–∑–µ–º–ø–ª—è—Ä–∞        | `@x`      | –í–Ω—É—Ç—Ä–∏ –æ–±—ä–µ–∫—Ç–∞                         | —É –∫–∞–∂–¥–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞   |
| –ö–ª–∞—Å—Å–∞            | `@@x`     | –í–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–∞ **–∏ –µ–≥–æ –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–æ–≤**   | —É –≤—Å–µ–≥–æ –¥–µ—Ä–µ–≤–∞         |
| –ì–ª–æ–±–∞–ª—å–Ω–∞—è        | `$x`      | –í–æ –≤—Å–µ–π –ø—Ä–æ–≥—Ä–∞–º–º–µ                      | –≤–µ–∑–¥–µ (ü§¢)             |
| –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞         | `X`       | –í –º–æ–¥—É–ª–µ –∏–ª–∏ –∫–ª–∞—Å—Å–µ                    | —á–µ—Ä–µ–∑ `::`             |

---

## üß™ –ü—Ä–∏–º–µ—Ä—ã –≤ –±–æ—é

```ruby
class Spaceship
  @@fleet_size = 0   # –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –∫–ª–∞—Å—Å–∞

  def initialize(name)
    @name = name      # –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞
    @@fleet_size += 1
  end

  def self.fleet_size
    @@fleet_size
  end

  def name
    @name
  end
end

s1 = Spaceship.new("Apollo")
s2 = Spaceship.new("Falcon")

puts s1.name             # => Apollo
puts Spaceship.fleet_size # => 2
````

---

## üß¨ –ß–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è `@` –æ—Ç `@@`?

```ruby
class Parent
  @@var = "from parent"
  @var  = "instance var of Parent"

  def self.vars
    [@@var, @var]
  end
end

class Child < Parent
  @@var = "from child"
  @var  = "instance var of Child"
end

puts Parent.vars.inspect # => ["from child", "instance var of Parent"]
puts Child.vars.inspect  # => ["from child", "instance var of Child"]
```

**–í—ã–≤–æ–¥:**

* `@@var` ‚Äî **–æ–¥–Ω–∞ –Ω–∞ –≤—Å—ë –¥–µ—Ä–µ–≤–æ**: –ª—é–±—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è ‚Äî –≤–µ–∑–¥–µ.
* `@var` ‚Äî **—Ä–∞–∑–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**: –æ–¥–Ω–∞ —É `Parent`, –¥—Ä—É–≥–∞—è —É `Child`.

---

## üíÄ –ó–∞—á–µ–º –∏–∑–±–µ–≥–∞—Ç—å @@?

1. –î–µ–ª–∏—Ç—Å—è —Å –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∞–º–∏ ‚Äî **–Ω–∞—Ä—É—à–∞–µ—Ç –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—é**.
2. –¢—Ä—É–¥–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å, –≥–¥–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å.
3. –ë–∞–≥–∏ –≤ –ø—Ä–æ–¥–µ ‚Üí –Ω—ã—Ç—å—ë –≤ Jira.

**–°–æ–≤–µ—Ç:** –ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `@` –Ω–∞ —É—Ä–æ–≤–Ω–µ `class << self`:

```ruby
class MyClass
  class << self
    attr_accessor :my_var
  end
end
```

---

## üó∫ –ê —á—Ç–æ —Å \$–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏?

```ruby
$x = 42

class Demo
  def show
    puts $x
  end
end

Demo.new.show  # => 42
```

* –ì–ª–æ–±–∞–ª—å–Ω–æ.
* –ë–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω–æ.
* –ù–µ –Ω–∞–¥–æ —Ç–∞–∫.

---

## üìå –ú–Ω–µ–º–æ–Ω–∏–∫–∞:

* `@` ‚Äî —É –æ–±—ä–µ–∫—Ç–∞ (@–ª–∏—á–Ω–æ–µ)
* `@@` ‚Äî —É –≤—Å–µ—Ö –ø–æ—Ç–æ–º–∫–æ–≤ (–¥–≤–æ–π–Ω–æ–π –≥–µ–º–æ—Ä—Ä–æ–π)
* `$` ‚Äî –≤—Å–µ–º –ø–æ—Ñ–∏–≥, –Ω–æ –≤–∏–¥–Ω–æ –≤–µ–∑–¥–µ

---

## ‚ùó –ü–æ–ø—É–ª—è—Ä–Ω—ã–π –ø–æ–¥–≤–æ—Ö:

```ruby
class A
  def self.set
    @@x = 1
  end
end

class B < A
end

B.set
puts A.class_variable_get(:@@x) # => 1
```

`@@x` **–∑–∞–≤—ë–ª—Å—è –≤ —Ä–æ–¥–∏—Ç–µ–ª–µ**, –Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –µ–≥–æ –∏–∑ –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∞.

---

üîö **–í—ã–≤–æ–¥:**
–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å —Å–∏–º–≤–æ–ª–∞–º–∏ –≤ Ruby ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å, —ç—Ç–æ —Ü–µ–ª—ã–π —Å—Ç–∏–ª—å –º—ã—à–ª–µ–Ω–∏—è.
–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –º–µ–Ω—å—à–µ –±–æ–ª–∏ ‚Äî –∑–∞–±—É–¥—å –ø—Ä–æ `@@` –∏ —Ç–µ–º –±–æ–ª–µ–µ –ø—Ä–æ `$`. –ë—É–¥—å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º —Ä—É–±–∏—Å—Ç–æ–º ‚Äî –∏ –ø–∏—à–∏ `@` –≤ –Ω—É–∂–Ω–æ–º –º–µ—Å—Ç–µ.
