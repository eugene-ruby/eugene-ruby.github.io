---
layout: post
subtitle: <div id="terminal"></div>
title:  "ğŸ“¦ Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ ĞºĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ğ°Ğ¼Ğ¸ Ğ¸ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ² Ruby: Ğ¼ĞµÑ‚Ğ°Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ±ĞµĞ· Ğ±Ğ¾Ğ»Ğ¸"
date:   2025-04-25 12:00:00 +0300
rate: 4
tags: Ruby,Ğ¼ĞµÑ‚Ğ°Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ,ĞºĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñ‹,Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ,Ñ€ĞµÑ„Ğ»ĞµĞºÑĞ¸Ñ
version: 3.2.2
categories:
  - ruby
hero_image: /images/posts/42.jpg
hero_darken: true
toc: true
menubar_toc: true
---

ĞšĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñ‹ Ğ¸ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ² Ruby â€” ÑÑ‚Ğ¾ Ğ½Ğµ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…, Ğ° Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ñ†ĞµĞ½Ğ½Ñ‹Ğµ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹ Ğ¼ĞµÑ‚Ğ°Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ. Ğ’ ÑÑ‚Ğ°Ñ‚ÑŒĞµ Ñ€Ğ°Ğ·Ğ±ĞµÑ€Ñ‘Ğ¼ Ğ¼ĞµÑ‚Ğ¾Ğ´Ñ‹ Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ Ğ½Ğ¸Ğ¼Ğ¸, Ğ¸Ñ… Ğ¿Ğ¾Ğ´Ğ²Ğ¾Ğ´Ğ½Ñ‹Ğµ ĞºĞ°Ğ¼Ğ½Ğ¸ Ğ¸ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğµ ĞºĞµĞ¹ÑÑ‹ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ â€” Ğ¾Ñ‚ Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ ĞºĞ»Ğ°ÑÑĞ¾Ğ² Ğ´Ğ¾ Ñ…Ğ¸Ñ‚Ñ€Ñ‹Ñ… Ñ„Ğ¸ĞºÑĞ¾Ğ² legacy-ĞºĞ¾Ğ´Ğ°.

---

## ğŸ” Ğ’Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğµ: Ğ·Ğ°Ñ‡ĞµĞ¼ ÑÑ‚Ğ¾ Ğ½ÑƒĞ¶Ğ½Ğ¾?

ĞŸÑ€ĞµĞ´ÑÑ‚Ğ°Ğ²ÑŒÑ‚Ğµ: Ğ²Ñ‹ Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚Ğµ ÑÑ‚Ğ°Ñ€Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚, Ğ° Ñ‚Ğ°Ğ¼...
```ruby
class Magic
  KLASS = case ENV['MODE']
          when 'prod' then ProductionSpell
          when 'test' then TestSpell
          else DebugSpell
          end
end
```
Ğ˜ Ğ½ÑƒĞ¶Ğ½Ğ¾ ÑÑ‚Ğ¾ ĞºĞ°Ğº-Ñ‚Ğ¾ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ, Ğ¼ĞµĞ½ÑÑ‚ÑŒ Ğ¸Ğ»Ğ¸ Ğ²Ğ¾Ğ¾Ğ±Ñ‰Ğµ ÑƒĞ´Ğ°Ğ»ÑÑ‚ÑŒ. Ğ’Ğ¾Ñ‚ Ñ‚ÑƒÑ‚-Ñ‚Ğ¾ Ğ¸ Ğ¿Ñ€Ğ¸Ğ³Ğ¾Ğ´ÑÑ‚ÑÑ Ğ¼ĞµÑ‚Ğ¾Ğ´Ñ‹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ ĞºĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ğ°Ğ¼Ğ¸!

---

# ğŸ“Œ ĞšĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñ‹: Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿

## `const_get` / `const_set` â€” Ñ‡Ğ¸Ñ‚Ğ°ĞµĞ¼ Ğ¸ Ğ¿Ğ¸ÑˆĞµĞ¼ ĞºĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñ‹

**Ğ¢ĞµĞ¾Ñ€Ğ¸Ñ**:  
Ğ­Ñ‚Ğ¸ Ğ¼ĞµÑ‚Ğ¾Ğ´Ñ‹ Ğ¿Ğ¾Ğ·Ğ²Ğ¾Ğ»ÑÑÑ‚ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°Ñ‚ÑŒ Ğ¸ ÑƒÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñ‹ **Ğ¿Ğ¾ ÑÑ‚Ñ€Ğ¾ĞºĞ¾Ğ²Ğ¾Ğ¼Ñƒ Ğ¸Ğ¼ĞµĞ½Ğ¸**.

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€**: Ğ”Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ĞºĞ»Ğ°ÑÑĞ¾Ğ² Ğ´Ğ»Ñ Ğ¿Ğ»Ğ°Ğ³Ğ¸Ğ½Ğ¾Ğ²:
```ruby
# Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµĞ¼ Ğ²ÑĞµ Ğ¿Ğ»Ğ°Ğ³Ğ¸Ğ½Ñ‹ Ğ¸Ğ· Ğ¿Ğ°Ğ¿ĞºĞ¸
Dir['plugins/*.rb'].each do |file|
  plugin_name = File.basename(file, '.rb').camelize
  klass = Object.const_set(plugin_name, Class.new(PluginBase))
  klass.load(file)
end
```

**ĞĞ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½**:  
Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ `const_set` Ğ´Ğ»Ñ Ğ¿ĞµÑ€ĞµĞ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ñ ÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ñ‹Ñ… ĞºĞ»Ğ°ÑÑĞ¾Ğ²:
```ruby
# âŒ ĞŸĞ»Ğ¾Ñ…Ğ¾: ÑĞ»Ğ¾Ğ¼Ğ°ĞµÑ‚ Ğ²ĞµÑÑŒ String Ğ² ÑĞ¸ÑÑ‚ĞµĞ¼Ğµ
Object.const_set(:String, MyWeirdString)
```

---

## `const_defined?` â€” Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ½Ğ° ÑÑƒÑ‰ĞµÑÑ‚Ğ²Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

**Ğ¢ĞµĞ¾Ñ€Ğ¸Ñ**:  
ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚, Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ° Ğ»Ğ¸ ĞºĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ğ° Ğ² Ñ‚ĞµĞºÑƒÑ‰ĞµĞ¼ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğµ.

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€**: Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ°Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¼Ğ¾Ğ´ÑƒĞ»ĞµĞ¹:
```ruby
unless Object.const_defined?(:Redis)
  require 'redis'
  Object.const_set(:Redis, Redis)
end
```

**Ğ›Ğ¾Ğ²ÑƒÑˆĞºĞ°**:  
ĞœĞµÑ‚Ğ¾Ğ´ Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ Ğ²Ñ‚Ğ¾Ñ€Ğ¾Ğ¹ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ `inherit` (Ğ¸ÑĞºĞ°Ñ‚ÑŒ Ğ² Ñ€Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒÑĞºĞ¸Ñ… ĞºĞ»Ğ°ÑÑĞ°Ñ…):
```ruby
module A; MY_CONST = 1; end
class B; include A; end

B.const_defined?(:MY_CONST) #=> false
B.const_defined?(:MY_CONST, true) #=> true
```

---

## `remove_const` â€” ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚

**Ğ¢ĞµĞ¾Ñ€Ğ¸Ñ**:  
Ğ£Ğ´Ğ°Ğ»ÑĞµÑ‚ ĞºĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñƒ Ğ¸Ğ· Ñ‚ĞµĞºÑƒÑ‰ĞµĞ³Ğ¾ Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ/ĞºĞ»Ğ°ÑÑĞ°.

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€**: ĞÑ‡Ğ¸ÑÑ‚ĞºĞ° Ğ² Ñ‚ĞµÑÑ‚Ğ°Ñ…:
```ruby
RSpec.describe MyGem do
  after do
    MyGem.send(:remove_const, :Config) if MyGem.const_defined?(:Config)
  end
end
```

**Ğ’Ğ°Ğ¶Ğ½Ğ¾**:  
Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚ â€” Ğ¾Ğ¿Ğ°ÑĞ½Ğ°Ñ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ñ! Ğ¡ÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğµ Ğ¾Ğ±ÑŠĞµĞºÑ‚Ñ‹ ÑÑ‚Ğ¾Ğ³Ğ¾ ĞºĞ»Ğ°ÑÑĞ° Ğ¾ÑÑ‚Ğ°Ğ½ÑƒÑ‚ÑÑ Ğ² Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸.

---

# ğŸ—ï¸ ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ ÑĞºĞ·ĞµĞ¼Ğ¿Ğ»ÑÑ€Ğ°

## `instance_variable_get` / `instance_variable_set`

**Ğ¢ĞµĞ¾Ñ€Ğ¸Ñ**:  
Ğ§Ñ‚ĞµĞ½Ğ¸Ğµ Ğ¸ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… ÑĞºĞ·ĞµĞ¼Ğ¿Ğ»ÑÑ€Ğ° Ğ¿Ğ¾ Ğ¸Ğ¼ĞµĞ½Ğ¸ (Ğ²ĞºĞ»ÑÑ‡Ğ°Ñ `@`).

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€**: Ğ”ĞµÑĞµÑ€Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:
```ruby
json = { "@name" => "John", "@age" => 30 }

user = User.new
json.each do |key, value|
  user.instance_variable_set(key, value)
end
```

**ĞĞ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½**:  
Ğ—Ğ»Ğ¾ÑƒĞ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ»ĞµĞ½Ğ¸Ğµ Ğ² production-ĞºĞ¾Ğ´Ğµ Ğ²Ğ¼ĞµÑÑ‚Ğ¾ Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¾Ğ² Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ°.

---

## `instance_variables` â€” ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ…

**Ğ¢ĞµĞ¾Ñ€Ğ¸Ñ**:  
Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ¼Ğ°ÑÑĞ¸Ğ² Ğ¸Ğ¼ĞµĞ½ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… ÑĞºĞ·ĞµĞ¼Ğ¿Ğ»ÑÑ€Ğ° (Ñ `@`).

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€**: ĞÑ‚Ğ»Ğ°Ğ´ĞºĞ° ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğ°:
```ruby
def debug(obj)
  puts "Variables: #{obj.instance_variables.join(', ')}"
end
```

---

# ğŸ›ï¸ ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ ĞºĞ»Ğ°ÑÑĞ°

## `class_variable_get` / `class_variable_set`

**Ğ¢ĞµĞ¾Ñ€Ğ¸Ñ**:  
ĞĞ½Ğ°Ğ»Ğ¾Ğ³Ğ¸Ñ‡Ğ½Ğ¾ instance-Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ°Ğ¼, Ğ½Ğ¾ Ğ´Ğ»Ñ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… ĞºĞ»Ğ°ÑÑĞ° (`@@`).

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€**: ĞĞ°ÑĞ»ĞµĞ´ÑƒĞµĞ¼Ñ‹Ğ¹ ĞºĞµÑˆ:
```ruby
class Base
  @@cache = {}

  def self.add_to_cache(key, value)
    class_variable_set(:@@cache, class_variable_get(:@@cache).merge(key => value))
  end
end
```

**ĞÑÑ‚Ğ¾Ñ€Ğ¾Ğ¶Ğ½Ğ¾**:  
ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ ĞºĞ»Ğ°ÑÑĞ° Ğ²Ğ¸Ğ´Ğ½Ñ‹ Ğ²Ğ¾ Ğ²ÑĞµĞ¹ Ğ¸ĞµÑ€Ğ°Ñ€Ñ…Ğ¸Ğ¸ Ğ½Ğ°ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ!

---

## `class_variables` â€” ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… ĞºĞ»Ğ°ÑÑĞ°

**Ğ¢ĞµĞ¾Ñ€Ğ¸Ñ**:  
Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ¼Ğ°ÑÑĞ¸Ğ² Ğ¸Ğ¼ĞµĞ½ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… ĞºĞ»Ğ°ÑÑĞ°.

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€**: ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ½Ğ° "Ğ·Ğ°ÑĞ¾Ñ€ĞµĞ½Ğ¸Ğµ" ĞºĞ»Ğ°ÑÑĞ°:
```ruby
if MyClass.class_variables.any?
  logger.warn "Class variables detected in #{MyClass}"
end
```

---

## ğŸ¯ Ğ’Ñ‹Ğ²Ğ¾Ğ´: ĞºĞ¾Ğ³Ğ´Ğ° ÑÑ‚Ğ¾ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾ Ğ½ÑƒĞ¶Ğ½Ğ¾?

1. **ĞœĞµÑ‚Ğ°Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ**: Ğ¿Ğ»Ğ°Ğ³Ğ¸Ğ½Ñ‹, Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ ĞºĞ»Ğ°ÑÑÑ‹
2. **Ğ¢ĞµÑÑ‚Ñ‹**: Ğ¼Ğ¾ĞºĞ¸, ÑÑ‚Ğ°Ğ±Ñ‹, Ğ¾Ñ‡Ğ¸ÑÑ‚ĞºĞ° ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ
3. **Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹**: Ğ´ĞµĞ±Ğ°Ğ³Ğ³ĞµÑ€Ñ‹, ÑĞµÑ€Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ‚Ğ¾Ñ€Ñ‹
4. **Legacy-ĞºĞ¾Ğ´**: ĞºĞ¾Ğ³Ğ´Ğ° Ğ´Ñ€ÑƒĞ³Ğ¾Ğ³Ğ¾ Ğ²Ñ‹Ñ…Ğ¾Ğ´Ğ° Ğ½ĞµÑ‚

**Ğ—Ğ¾Ğ»Ğ¾Ñ‚Ğ¾Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ¾**:  
Ğ•ÑĞ»Ğ¸ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¾Ğ±Ğ¾Ğ¹Ñ‚Ğ¸ÑÑŒ Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ñ‹Ğ¼Ğ¸ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ°Ğ¼Ğ¸ â€” Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ Ğ¸Ñ…. Ğ­Ñ‚Ğ¸ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹ â€” ĞºĞ°Ğº Ñ…Ğ¸Ñ€ÑƒÑ€Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ ÑĞºĞ°Ğ»ÑŒĞ¿ĞµĞ»Ğ¸: Ğ¼Ğ¾Ñ‰Ğ½Ñ‹Ğµ, Ğ½Ğ¾ Ğ¾Ğ¿Ğ°ÑĞ½Ñ‹Ğµ.

```ruby
# Ğ˜Ğ½Ğ¾Ğ³Ğ´Ğ° Ğ»ÑƒÑ‡ÑˆĞµ Ñ‚Ğ°Ğº:
MyClass.const_get(:Settings) #=> ğŸš€

# Ğ§ĞµĞ¼ Ñ‚Ğ°Ğº:
eval "MyClass::Settings" #=> ğŸ’¥
```
