---
layout: post
subtitle: <div id="terminal"></div>
title:  "–ú–µ—Ç–∞–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Ruby: –º–∞–≥–∏—è, –∫–æ—Ç–æ—Ä—É—é —Å—Ç–æ–∏—Ç –æ—Å–≤–æ–∏—Ç—å"
date:   2025-04-21 12:00:00 +0300
rate: 4
tags: Ruby, –º–µ—Ç–∞–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ
version: A9X
categories:
- ruby
hero_image: /images/posts/86.jpg
hero_darken: true
toc: true
menubar_toc: true
---


–ú–µ—Ç–∞–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Ruby ‚Äî —ç—Ç–æ –∫–∞–∫ –≤–æ–ª—à–µ–±–Ω–∞—è –ø–∞–ª–æ—á–∫–∞ –≤ —Ä—É–∫–∞—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞: –æ–Ω–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–∏—Å–∞—Ç—å –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥—Ä—É–≥–æ–π –∫–æ–¥, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–∑–º–µ–Ω—è–µ—Ç –∫–ª–∞—Å—Å—ã –∏ —Å–æ–∑–¥–∞—ë—Ç –º–µ—Ç–æ–¥—ã –Ω–∞ –ª–µ—Ç—É. –í —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ –º—ã –∫—Ä–∞—Ç–∫–æ —Ä–∞–∑–±–µ—Ä—ë–º –æ—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –º–µ—Ç–∞–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ —Ä–µ—à–∞—Ç—å –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏ —ç–ª–µ–≥–∞–Ω—Ç–Ω–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ.

---

## üßô‚Äç‚ôÇÔ∏è –ß—Ç–æ —Ç–∞–∫–æ–µ –º–µ—Ç–∞–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ?

–ú–µ—Ç–∞–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî —ç—Ç–æ —Ç–µ—Ö–Ω–∏–∫–∞, –∫–æ–≥–¥–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å, –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Å–∞–º—É —Å–µ–±—è –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è. –í Ruby —ç—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –º–æ—â–Ω–æ –±–ª–∞–≥–æ–¥–∞—Ä—è –µ–≥–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –ø—Ä–∏—Ä–æ–¥–µ.

**–ü—Ä–∏–º–µ—Ä –∏–∑ —Ä–µ–∞–ª—å–Ω–æ–π –∂–∏–∑–Ω–∏:**  
–ö–æ–≥–¥–∞ –≤—ã –≤–∏–¥–∏—Ç–µ –≤ Rails —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ `has_many :comments`, –∑–∞ –∫—É–ª–∏—Å–∞–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–º–µ–Ω–Ω–æ –º–µ—Ç–∞–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ.

---

## üõ† –û—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

### 1. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤

```ruby
class User
  [:admin, :moderator, :guest].each do |role|
    define_method "#{role}?" do
      self.role == role.to_s
    end
  end
end

user = User.new(role: 'admin')
user.admin? # => true
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ß—Ä–µ–∑–º–µ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `define_method` –º–æ–∂–µ—Ç —Å–¥–µ–ª–∞—Ç—å –∫–æ–¥ —Å–ª–æ–∂–Ω—ã–º –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏.

---

### 2. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–æ–≤

```ruby
# –ü–ª–æ—Ö–æ (–æ–ø–∞—Å–Ω–æ –ø—Ä–∏ user_input)
method_name = params[:action]
user.send(method_name)

# –õ—É—á—à–µ
user.public_send(method_name) if user.respond_to?(method_name)
```

**–ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `send` —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –≤–≤–æ–¥–æ–º –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ ‚Äî –æ—Ç–∫—Ä—ã—Ç–∞—è –¥–≤–µ—Ä—å –¥–ª—è –≤–∑–ª–æ–º–∞.

---

### 3. –ò–Ω—Ç—Ä–æ—Å–ø–µ–∫—Ü–∏—è –º–µ—Ç–æ–¥–æ–≤

```ruby
class Demo
  def hello; end
end

Demo.instance_methods(false) # => [:hello]
Demo.method_defined?(:hello) # => true
```

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ:** –ö–æ–≥–¥–∞ –ø–∏—à–µ—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏–ª–∏ DSL, –≥–¥–µ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞–ª–∏—á–∏–µ –º–µ—Ç–æ–¥–æ–≤.

---

### 4. –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–ª–∞—Å—Å–æ–≤ –Ω–∞ –ª–µ—Ç—É

```ruby
String.class_eval do
  def shout
    upcase + "!"
  end
end

"hello".shout # => "HELLO!"
```

**–û—Å—Ç–æ—Ä–æ–∂–Ω–æ:** –ú–æ–Ω–∫–∏-–ø–∞—Ç—á–∏–Ω–≥ (–∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤) –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –≤ –±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö.

---

### 5. –ú–∞–≥–∏—è method_missing

```ruby
class DynamicProxy
  def method_missing(name, *args)
    if name.to_s.start_with?('find_by_')
      # ... —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ finder'–∞
    else
      super
    end
  end
end
```

**–°–æ–≤–µ—Ç:** –í—Å–µ–≥–¥–∞ —Ä–µ–∞–ª–∏–∑—É–π—Ç–µ `respond_to_missing?` –≤ –ø–∞—Ä—É –∫ `method_missing`.

---

## üéØ –ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è—Ç—å?

–ú–µ—Ç–∞–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è:
- –°–æ–∑–¥–∞–Ω–∏—è DSL (–∫–∞–∫ –≤ RSpec –∏–ª–∏ Rails)
- –ì–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ–≤—Ç–æ—Ä—è—é—â–µ–≥–æ—Å—è –∫–æ–¥–∞
- –ù–∞–ø–∏—Å–∞–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫ –∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤

**–ù–æ:** –í –æ–±—ã—á–Ω–æ–º –±–∏–∑–Ω–µ—Å-–∫–æ–¥–µ —á–∞—Å—Ç–æ –º–æ–∂–Ω–æ –æ–±–æ–π—Ç–∏—Å—å –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç—ã–º–∏ —Ä–µ—à–µ–Ω–∏—è–º–∏.

---

## üí• –û–ø–∞—Å–Ω—ã–µ –ø—Ä–∏—ë–º—ã

```ruby
# 1. eval —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –≤–≤–æ–¥–æ–º
eval(params[:code]) # –ö–ê–¢–ê–°–¢–†–û–§–ê!

# 2. –ë–µ—Å–∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç
def dangerous
  CONST = "–Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ" # => warning: already initialized constant
end
```

**–ü—Ä–∞–≤–∏–ª–æ:** –ï—Å–ª–∏ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –±–µ–∑ –º–µ—Ç–∞–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è ‚Äî —Å–¥–µ–ª–∞–π—Ç–µ –±–µ–∑ –Ω–µ–≥–æ.

---

## üèÜ –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. –í—Å–µ–≥–¥–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –º–µ—Ç–∞-–∫–æ–¥
2. –ü–∏—à–∏—Ç–µ –≤ 2 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è —Ç–∞–∫–æ–≥–æ –∫–æ–¥–∞
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `frozen_string_literal: true`
4. –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π—Ç–µ `public_send` –≤–º–µ—Å—Ç–æ `send`
5. –ò–∑–±–µ–≥–∞–π—Ç–µ –º–æ–Ω–∫–∏-–ø–∞—Ç—á–∏–Ω–≥–∞ –≤ production-–∫–æ–¥–µ

---

## üß™ –ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∞ –¥–ª—è –º–µ—Ç–∞-–∫–æ–¥–∞

```ruby
describe DynamicFinder do
  it 'responds to dynamic finders' do
    expect(DynamicFinder.new).to respond_to(:find_by_name)
  end

  it 'raises NoMethodError for invalid finders' do
    expect { DynamicFinder.new.find_by_invalid }.to raise_error(NoMethodError)
  end
end
```

---

## üé§ –ß—Ç–æ —Å–∫–∞–∑–∞—Ç—å –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏

> "–ú–µ—Ç–∞–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Ruby ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ. –Ø –ø—Ä–∏–º–µ–Ω—è—é –µ–≥–æ —Ç–∞–º, –≥–¥–µ —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —É–ø—Ä–æ—â–∞–µ—Ç –∫–æ–¥, –Ω–æ –≤—Å–µ–≥–¥–∞ –ø–æ–º–Ω—é –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç–∏."

---

## üèÅ –í—ã–≤–æ–¥

–ú–µ—Ç–∞–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Ruby –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–≤–µ—Ä–∏ –≤ –º–∏—Ä —ç–ª–µ–≥–∞–Ω—Ç–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–∏ —Ç–µ—Ö–Ω–∏–∫–∏ —Å —É–º–æ–º, –∏ –≤–∞—à –∫–æ–¥ —Å—Ç–∞–Ω–µ—Ç –Ω–µ —Ç–æ–ª—å–∫–æ –º–æ—â–Ω—ã–º, –Ω–æ –∏ –ø–æ–Ω—è—Ç–Ω—ã–º –¥–ª—è –¥—Ä—É–≥–∏—Ö.

**–ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ:** –ï—Å–ª–∏ –ø–æ—Å–ª–µ –≤–∞—à–µ–≥–æ –º–µ—Ç–∞-–∫–æ–¥–∞ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–µ –º–æ–∂–µ—Ç —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ, –≤—ã –ø–µ—Ä–µ—Å—Ç–∞—Ä–∞–ª–∏—Å—å.
