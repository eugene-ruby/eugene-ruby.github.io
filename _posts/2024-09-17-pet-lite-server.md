---
layout: post
subtitle: <div id="terminal"></div>
title:  "–í—ã–±–∏—Ä–∞–µ–º –ø–µ—Ä–≤—ã–π VPS: –ø–æ—á–µ–º—É –¥–æ—Ä–æ–≥–æ–π —Å–µ—Ä–≤–µ—Ä ‚â† —É—Å–ø–µ—à–Ω—ã–π –ø—Ä–æ–µ–∫—Ç"
date:  2024-09-17 12:00:00 +0300
rate: 1
tags: VPS Server pet
version: A9X
categories:
  - pet
hero_image: /images/ruby.jpg
hero_darken: true
toc: true
menubar_toc: true
---
–í—ã–±–æ—Ä –ø–µ—Ä–≤–æ–≥–æ VPS –ø–æ—Ö–æ–∂ –Ω–∞ –ø–æ–∫—É–ø–∫—É –ø–µ—Ä–≤–æ–π –º–∞—à–∏–Ω—ã: —Ö–æ—á–µ—Ç—Å—è –≤–∑—è—Ç—å ¬´—á—Ç–æ-—Ç–æ –ø–æ–º–æ—â–Ω–µ–µ¬ª, –Ω–æ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ —á–∞—Å—Ç–æ –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è, —á—Ç–æ —Å–∫—Ä–æ–º–Ω—ã–π —Ç–∞—Ä–∏—Ñ —Å HDD –∏ 1 –ì–ë RAM —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ª—É—á—à–µ, —á–µ–º —Ç–æ–ø–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä –∑–∞ $100/–º–µ—Å. –†–∞–∑–±–µ—Ä—ë–º—Å—è, –∫–∞–∫ –Ω–µ –ø–µ—Ä–µ–ø–ª–∞—Ç–∏—Ç—å –∑–∞ –Ω–µ–Ω—É–∂–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ü–µ–Ω–∏—Ç—å –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ Ruby-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

---

## üß© vCPU, RAM, SSD: —á—Ç–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –Ω—É–∂–Ω–æ –≤–∞—à–µ–º—É –ø—Ä–æ–µ–∫—Ç—É?

### 1. vCPU ‚Äî –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —è–¥—Ä–∞ ‚â† —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º
**–ú–∏—Ñ**: ¬´4 vCPU —Å–¥–µ–ª–∞—é—Ç –º–æ–π Rails-—Å–∞–π—Ç –±—ã—Å—Ç—Ä—ã–º!¬ª  
**–†–µ–∞–ª—å–Ω–æ—Å—Ç—å**: vCPU ‚Äî —ç—Ç–æ –¥–æ–ª—è —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ —è–¥—Ä–∞. 1 vCPU –º–æ–∂–µ—Ç –±—ã—Ç—å:
- 25% —Ä–µ–∞–ª—å–Ω–æ–≥–æ —è–¥—Ä–∞ (–µ—Å–ª–∏ —Ö–æ—Å—Ç–∏–Ω–≥ ¬´–∂–∞–¥–Ω—ã–π¬ª)
- –∏–ª–∏ 100% (–Ω–∞ –≤—ã–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö).

**–î–ª—è Ruby/Rails**:
- –ë–∞–∑–æ–≤—ã–π –±–ª–æ–≥: **1 vCPU** —Ö–≤–∞—Ç–∏—Ç (Puma –≤ 1 –ø–æ—Ç–æ–∫ + Sidekiq).
- –°—Ä–µ–¥–Ω–∏–π SaaS: **2 vCPU** (2-4 –ø–æ—Ç–æ–∫–∞ Puma + —Ñ–æ–Ω–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞).
- Highload: **4+ vCPU** + –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ.

```ruby
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ (SSH)
`uptime` # 1.0 = 100% –∑–∞–≥—Ä—É–∑–∫–∏ 1 —è–¥—Ä–∞
# => "load average: 0.3, 0.2, 0.1" ‚Äî –≤—Å—ë –æ–∫
```

### 2. 1 –ì–ë RAM ‚Äî –º–∞–ª–æ –∏–ª–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ?
**–ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω**: ¬´–í–æ–∑—å–º—É 8 –ì–ë ‚Äî —á—Ç–æ–±—ã —Ç–æ—á–Ω–æ —Ö–≤–∞—Ç–∏–ª–æ¬ª.  
**–ü—Ä–∞–≤–¥–∞**:
- **Rails + PostgreSQL** –Ω–∞ –º–∏–Ω–∏–º–∞–ª–∫–∞—Ö —Å—ä–µ–¥–∞—é—Ç ~600 –ú–ë.
- **Swap-—Ñ–∞–π–ª** (–Ω–∞ HDD) —É–±–∏–≤–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.
- **–õ—É—á—à–∏–π –≤—ã–±–æ—Ä**: 1-2 –ì–ë –¥–ª—è —Å—Ç–∞—Ä—Ç–∞

**–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å**:
```bash
free -h
# –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:
# Mem:    total 1.0Gi / used 800Mi / free 200Mi
```
–í–æ—Ç —É–ª—É—á—à–µ–Ω–Ω—ã–π –∏ –±–æ–ª–µ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–π —Ä–∞–∑–¥–µ–ª `HDD vs SSD`, —Å –ø–æ—è—Å–Ω–µ–Ω–∏–µ–º **–ø–æ—á–µ–º—É**, **–≤ –∫–∞–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö** HDD –µ—â—ë –¥–æ–ø—É—Å—Ç–∏–º, –∏ **—á—Ç–æ –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç –æ—Ç SSD**:

---

### ‚öôÔ∏è 3. HDD vs SSD: —ç–∫–æ–Ω–æ–º–∏—è –∏–ª–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å?

–í—ã–±–æ—Ä –º–µ–∂–¥—É HDD –∏ SSD –Ω–∞ VPS ‚Äî —ç—Ç–æ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å –º–µ–∂–¥—É —Ü–µ–Ω–æ–π –∏ —Å–∫–æ—Ä–æ—Å—Ç—å—é. –ù–∏–∂–µ ‚Äî –∫–æ–≥–¥–∞ –º–æ–∂–Ω–æ —Å—ç–∫–æ–Ω–æ–º–∏—Ç—å, –∞ –∫–æ–≥–¥–∞ —ç—Ç–æ –≤—ã–π–¥–µ—Ç —Å–µ–±–µ –¥–æ—Ä–æ–∂–µ.

---

#### üê¢ –ö–æ–≥–¥–∞ **HDD ‚Äî –¥–æ–ø—É—Å—Ç–∏–º**:

* üîß **Pet-–ø—Ä–æ–µ–∫—Ç—ã**, –¥–µ–º–∫–∏, –±–æ—Ç—ã, Telegram-—É—Ç–∏–ª–∏—Ç—ã ‚Äî –∫–æ–≥–¥–∞ –≤–∞–∂–µ–Ω –±—é–¥–∂–µ—Ç, –∞ –Ω–µ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã.
* üöß **PoC/MVP** ‚Äî –ø—Ä–æ—Ç–æ—Ç–∏–ø, –≥–¥–µ –Ω–µ—Ç –ø—Ä–æ–¥-–Ω–∞–≥—Ä—É–∑–∫–∏ –∏ –Ω–µ –∂–∞–ª–∫–æ –≤—Å—ë —Å–Ω–µ—Å—Ç–∏.
* üí§ **–ù–∏–∑–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ API –∏–ª–∏ —Å–∞–π—Ç—ã** ‚Äî –µ—Å–ª–∏ —Ç—Ä–∞—Ñ–∏–∫ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π, –∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ—á—Ç–∏ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è.
* üì¶ **–•—Ä–∞–Ω–∏–ª–∏—â–µ –∞—Ä—Ö–∏–≤–æ–≤ –∏–ª–∏ –ª–æ–≥–æ–≤** ‚Äî –µ—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–æ—Å—Ç–æ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –±—ç–∫–∞–ø—ã –∏–ª–∏ —Ñ–∞–π–ª—ã.

---

#### ‚ö° –ö–æ–≥–¥–∞ **SSD ‚Äî must-have**:

* üß† **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö > 1 –ì–ë** (–æ—Å–æ–±–µ–Ω–Ω–æ PostgreSQL)
  SSD –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ —É—Å–∫–æ—Ä—è–µ—Ç `INSERT`, `UPDATE`, –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é –∏ `VACUUM`.

* üß± **Production-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**, –≥–¥–µ:

    * –≤–∞–∂–Ω–∞ –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å API (< 100 –º—Å)
    * –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞–Ω–∏—è (Sidekiq, cron)
    * –µ—Å—Ç—å CI/CD –ø–∞–π–ø–ª–∞–π–Ω –ø—Ä—è–º–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

* üñº **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤, –º–µ–¥–∏–∞, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è PDF/–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**
  HDD –±—É–¥–µ—Ç —É–∑–∫–∏–º –º–µ—Å—Ç–æ–º –ø—Ä–∏ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç–µ —Å –¥–∏—Å–∫–æ–º.

* üïµÔ∏è **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, –∞–ª–µ—Ä—Ç—ã, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞** ‚Äî Prometheus, Elasticsearch, Grafana –∏ –ø—Ä–æ—á–∏–µ –ª—é–±—è—Ç –±—ã—Å—Ç—Ä—É—é IOPS.

---

#### üìå –ß–µ–∫-–ª–∏—Å—Ç

| –°—Ü–µ–Ω–∞—Ä–∏–π                    | HDD | SSD |
| --------------------------- | --- | --- |
| Pet-–ø—Ä–æ–µ–∫—Ç                  | ‚úÖ   | ‚úÖ   |
| –ë–∞–∑–∞ > 1–ì–ë                  | ‚ùå   | ‚úÖ   |
| CI/CD                       | ‚ö†Ô∏è  | ‚úÖ   |
| –ü—Ä–æ–¥-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ             | ‚ùå   | ‚úÖ   |
| –ê—Ä—Ö–∏–≤ –ª–æ–≥–æ–≤                 | ‚úÖ   | ‚ö†Ô∏è  |
| PostgreSQL —Å —á–∞—Å—Ç—ã–º–∏ INSERT | ‚ùå   | ‚úÖ   |

SSD ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ ‚Äú–±—ã—Å—Ç—Ä–µ–µ‚Äù, –∞ –ø—Ä–æ ‚Äú**—Å—Ç–∞–±–∏–ª—å–Ω–µ–µ –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π**‚Äù

---

## üí∏ –ü—Ä–∞–∫—Ç–∏–∫–∞: –ø–æ–¥–±–∏—Ä–∞–µ–º —Ç–∞—Ä–∏—Ñ –ø–æ–¥ —Ç–∏–ø–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: Pet-–ø—Ä–æ–µ–∫—Ç –Ω–∞ Rails
- **–¶–µ–ª—å**: —Ö–æ—Å—Ç–∏–Ω–≥ –¥–ª—è –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ.
- **–ö–æ–Ω—Ñ–∏–≥**:  
  - 1 vCPU  
  - 1 –ì–ë RAM  
  - 20 –ì–ë HDD  
  - –ë–µ–∑ SLA

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –°—Ç–∞—Ä—Ç–∞–ø (MVP)
- **–¶–µ–ª—å**: –ø–µ—Ä–≤—ã–π —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ç–æ—Ç–∏–ø.
- **–ö–æ–Ω—Ñ–∏–≥**:  
  - 2 vCPU  
  - 2 –ì–ë RAM  
  - 50 –ì–ë SSD 
  - **–õ–∞–π—Ñ—Ö–∞–∫**: –ª—É—á—à–µ –≤—ã–±—Ä–∞—Ç—å NVMe –±—ã—Å—Ç—Ä–µ–µ –æ–±—ã—á–Ω–æ–≥–æ SSD.

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: Production (SaaS)
- **–¶–µ–ª—å**: —Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ 100+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
- **–ö–æ–Ω—Ñ–∏–≥**:  
  - 4 vCPU  
  - 8 –ì–ë RAM  
  - 100 –ì–ë SSD + –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è PostgreSQL.  
  - **–í–∞–∂–Ω–æ**: –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (New Relic) –ø–æ–∫–∞–∂–µ—Ç, –≥–¥–µ —É–∑–∫–∏–µ –º–µ—Å—Ç–∞.

---

## üî• –¢–æ–ø-3 –æ—à–∏–±–∫–∏ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ VPS

1. **¬´–ù–∞–≥—Ä—É–∑–∫–∞ –±—É–¥–µ—Ç —Ä–∞—Å—Ç–∏¬ª**  
   –ê—Ä–µ–Ω–¥—É–µ—Ç–µ —Å–µ—Ä–≤–µ—Ä ¬´–Ω–∞ –≤—ã—Ä–æ—Å—Ç¬ª ‚Üí –ø–µ—Ä–µ–ø–ª–∞—á–∏–≤–∞–µ—Ç–µ 6 –º–µ—Å—è—Ü–µ–≤.  
   **–†–µ—à–µ–Ω–∏–µ**: –∞–≤—Ç–æ—Å–∫–µ–π–ª–∏–Ω–≥.

2. **¬´–í–æ–∑—å–º—É Windows ‚Äî –≤–¥—Ä—É–≥ –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è¬ª** –ù—É –º–∞–ª–æ –ª–∏, –≤–¥—Ä—É–≥ –∏ —Ç–∞–∫–∏–µ –º—ã—Å–ª–∏ –±—ã–≤–∞—é—Ç üòÖ  
   –õ–∏—Ü–µ–Ω–∑–∏—è + –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã —Å—ä–µ–¥—è—Ç 30% —Ä–µ—Å—É—Ä—Å–æ–≤.  
   **–î–ª—è Ruby** ‚Äî —Ç–æ–ª—å–∫–æ Linux (Ubuntu LTS).

3. **¬´–ì–ª–∞–≤–Ω–æ–µ ‚Äî –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä, –æ—Å—Ç–∞–ª—å–Ω–æ–µ –ø–æ—Å—Ç–∞–≤–∏–º –ø–æ—Ç–æ–º¬ª**  
   –£–≤–µ–ª–∏—á–∏—Ç—å RAM –º–æ–∂–Ω–æ –Ω–µ –Ω–∞ –≤—Å–µ—Ö —Ç–∞—Ä–∏—Ñ–∞—Ö.  

---

## üõ†Ô∏è –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è ¬´–º–∞–ª—ã—à–∞¬ª (1 vCPU / 1 –ì–ë RAM)

**–î–ª—è Rails**:
```ruby
# config/puma.rb
workers 1 # 1 master –ø—Ä–æ—Ü–µ—Å—Å
threads 1, 2 # min/max –ø–æ—Ç–æ–∫–æ–≤
```

**–î–ª—è PostgreSQL**:
```sql
ALTER SYSTEM SET shared_buffers = '256MB';
ALTER SYSTEM SET effective_cache_size = '768MB';
```

**–î–ª—è —Å–∏—Å—Ç–µ–º—ã**:
```bash
sudo swapoff -a # –ï—Å–ª–∏ swap –Ω–∞ HDD ‚Äî –ª—É—á—à–µ –æ—Ç–∫–ª—é—á–∏—Ç—å
sudo nano /etc/sysctl.conf
# –î–æ–±–∞–≤–∏—Ç—å:
vm.swappiness = 10
```

---

## üéØ –í—ã–≤–æ–¥

- **–°—Ç–∞—Ä—Ç—É–π—Ç–µ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —Ç–∞—Ä–∏—Ñ–∞** ‚Äî –∞–ø–≥—Ä–µ–π–¥ –¥–µ—à–µ–≤–ª–µ, —á–µ–º –ø–µ—Ä–µ–ø–ª–∞—Ç–∞ –∑–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã.
- **1 –ì–ë RAM ‚Äî –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ** –¥–ª—è –ø–µ—Ç-–ø—Ä–æ–µ–∫—Ç–æ–≤, –Ω–æ –º–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ `free -h`.
- **SSD > HDD** –¥–ª—è –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö, –Ω–æ —Å—Ç–∞—Ç–∏–∫—É –º–æ–∂–Ω–æ –∏ –Ω–∞ HDD.
- **vCPU ‚â† —è–¥—Ä–æ** ‚Äî —É—Ç–æ—á–Ω—è–π—Ç–µ —É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞, —Å–∫–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω–æ–π –º–æ—â–Ω–æ—Å—Ç–∏ –¥–∞—é—Ç.

**–ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ**: —Å–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å ¬´–≤ –º–µ—Ä—É —É–ø–∏—Ç–∞–Ω–Ω—ã–º¬ª ‚Äî –∫–∞–∫ —Ä–∞–∑ —á—Ç–æ–±—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤–∞—à —Ç–µ–∫—É—â–∏–π —Ç—Ä–∞—Ñ–∏–∫, –Ω–æ —Å –∑–∞–ø–∞—Å–æ–º 20-30% –¥–ª—è –ø–∏–∫–æ–≤. –í—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ ‚Äî –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è.
