---
layout: post
title:  "rbenv, RVM –∏–ª–∏ chruby? –ú–µ–Ω–µ–¥–∂–µ—Ä—ã Ruby –ø–æ–¥ –º–∏–∫—Ä–æ—Å–∫–æ–ø–æ–º"
rate: 3
tags: Ruby,RVM,rbenv,chruby,–º–µ–Ω–µ–¥–∂–µ—Ä—ã –≤–µ—Ä—Å–∏–π,Ubuntu
version: A49X3
date:   2024-09-18 14:00:00 +0300
categories:
  - tools
  - ruby
hero_image: /images/ruby.jpeg
hero_darken: true
toc: true
menubar_toc: true
---

–í—ã —Ç–æ–ª—å–∫–æ —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ —Å–≤–µ–∂–∏–π Ubuntu, –æ—Ç–∫—Ä—ã–ª–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª —Å –º–µ—á—Ç–∞–º–∏ –æ –Ω–æ–≤–æ–º Rails-–ø—Ä–æ–µ–∫—Ç–µ... –ò —Ç—É—Ç **"ruby: command not found"**. –ó–Ω–∞–∫–æ–º–æ? –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –º–∏—Ä –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ Ruby-–≤–µ—Ä—Å–∏–π ‚Äî –≥–¥–µ –æ–¥–Ω–∏ —Å–ø–∞—Å–∞—é—Ç –≤–∞—à–∏ –Ω–µ—Ä–≤—ã, –∞ –¥—Ä—É–≥–∏–µ –∏—Ö –∏—Å–ø—ã—Ç—ã–≤–∞—é—Ç. –°–µ–≥–æ–¥–Ω—è —Ä–∞–∑–±–µ—Ä—ë–º —Ç—Ä—ë—Ö –∫–∏—Ç–æ–≤: **RVM**, **rbenv** –∏ **chruby**, –∏—Ö –±–æ–ª—å–Ω—ã–µ –º–µ—Å—Ç–∞ –∏ –ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏.

---

## üßê –ó–∞—á–µ–º –≤–æ–æ–±—â–µ —ç—Ç–∏ –º–µ–Ω–µ–¥–∂–µ—Ä—ã?

–ü–æ—Ç–æ–º—É —á—Ç–æ:

1. **–ü—Ä–æ–µ–∫—Ç—ã –∂–∏–≤—É—Ç –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ä—Å–∏—è—Ö Ruby** (Rails 6 —Ç—Ä–µ–±—É–µ—Ç 2.7, –∞ legacy-–º–æ–Ω—Å—Ç—Ä ‚Äî 2.3)
2. **–°–∏—Å—Ç–µ–º–Ω—ã–π Ruby ‚Äî –∑–ª–æ** (–ø–æ–ø—Ä–æ–±—É–π—Ç–µ `sudo gem install` –∏ –ø–æ–ª—É—á–∏—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ —Å–≤–æ–π –∂–µ —Å–µ—Ä–≤–µ—Ä)
3. **Gemset'—ã** (—á—Ç–æ–±—ã `bundle install` –Ω–µ –ø—Ä–µ–≤—Ä–∞—â–∞–ª—Å—è –≤ –∏–≥—Ä—É "–Ω–∞–π–¥–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â—É—é –≥–µ–º—É")

–ò–¥–µ–∞–ª—å–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –¥–æ–ª–∂–µ–Ω:
- –ë—ã—Å—Ç—Ä–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å –≤–µ—Ä—Å–∏–∏
- –ù–µ –ª–æ–º–∞—Ç—å PATH
- –†–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ —Ç–∞–Ω—Ü–µ–≤ —Å –±—É–±–Ω–æ–º
- –ù–µ –∑–∞—Å—Ç–∞–≤–ª—è—Ç—å –≤–∞—Å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å `.bashrc` –∫–∞–∂–¥—ã–µ 2 —á–∞—Å–∞

---

## ÔøΩ RVM: "–Ø ‚Äî –∫–æ—Ä–æ–ª—å!"

**RVM (Ruby Version Manager)** ‚Äî –¥–µ–¥—É—à–∫–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π, —É–º–µ–µ—Ç –≤—Å—ë, –Ω–æ... –∏–Ω–æ–≥–¥–∞ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ.

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (–∫—Ä–µ–ø–∫–æ –¥–µ—Ä–∂–∏—Ç–µ—Å—å)
\curl -sSL https://get.rvm.io | bash -s stable
```

### üëç –ü–ª—é—Å—ã:
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ gemset'—ã** (`rvm use 3.1.0@myapp ‚Äîcreate`)
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Bundler** (`rvm . do bundle install`)
- **–ë–æ–≥–∞—Ç–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** (–∏ 100500 —Å–ø–æ—Å–æ–±–æ–≤ —Å–ª–æ–º–∞—Ç—å —Å–µ–±–µ —Å–∏—Å—Ç–µ–º—É)

### üëé –ú–∏–Ω—É—Å—ã:
- **–ü–µ—Ä–µ–ø–∏—Å—ã–≤–∞–µ—Ç –≤–∞—à shell** (–ø–æ–ø—Ä–æ–±—É–π—Ç–µ `type cd` –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏)
- **–ú–µ–¥–ª–µ–Ω–Ω—ã–π** (–∫–∞–∂–¥—ã–π –Ω–æ–≤—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª –≥—Ä—É–∑–∏—Ç –≤—Å—é –æ–±–≤—è–∑–∫—É)
- **"–ú–∞–≥–∏—á–µ—Å–∫–∏–π"** (–∏–Ω–æ–≥–¥–∞ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ, –ø–æ—á–µ–º—É –æ–Ω —Ä–µ—à–∏–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–º–µ–Ω–Ω–æ —ç—Ç—É –≤–µ—Ä—Å–∏—é)

### üíÄ –ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω:
```bash
# –ù–µ –¥–µ–ª–∞–π—Ç–µ —Ç–∞–∫! –≠—Ç–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç Ruby –ì–õ–û–ë–ê–õ–¨–ù–û
rvm use 3.0.0
```

---

## üßä rbenv: "–ú–∏–Ω–∏–º–∞–ª–∏–∑–º ‚Äî –Ω–∞—à–µ –≤—Å—ë"

**rbenv** ‚Äî –æ—Ç–≤–µ—Ç —Ö–∏–ø—Å—Ç–µ—Ä–æ–≤ –Ω–∞ RVM. –ù–∏–∫–∞–∫–æ–π –º–∞–≥–∏–∏, —Ç–æ–ª—å–∫–æ PATH –∏ symlinks.

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ Homebrew (macOS) –∏–ª–∏ git
brew install rbenv ruby-build
```

### üëç –ü–ª—é—Å—ã:
- **–ù–µ –ª–µ–∑–µ—Ç –≤ shell** (–ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–∞—Ä—É —Å—Ç—Ä–æ–∫ –≤ PATH)
- **–ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å** (–≤–µ—Ä—Å–∏—è –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –ø–æ `.ruby-version` –∏–ª–∏ —á–µ—Ä–µ–∑ `rbenv local`)
- **–ü–ª–∞–≥–∏–Ω—ã** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `rbenv-vars` –¥–ª—è env-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö)

### üëé –ú–∏–Ω—É—Å—ã:
- **–ù–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö gemset'–æ–≤** (–ø—Ä–∏–¥—ë—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `bundler` –∏–ª–∏ `direnv`)
- **–¢—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–π —Å–±–æ—Ä–∫–∏ Ruby** (–Ω–æ `ruby-build` —Ä–µ—à–∞–µ—Ç)

### üéØ –ò–¥–µ–∞–ª—å–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:
```bash
# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Ruby
rbenv install 3.2.2

# –ù–∞–∑–Ω–∞—á–∞–µ–º –≤–µ—Ä—Å–∏—é –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞
cd my_project
rbenv local 3.2.2

# Profit! –¢–µ–ø–µ—Ä—å –¥–∞–∂–µ `cd` –±—É–¥–µ—Ç –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞—Ç—å –≤–µ—Ä—Å–∏—é
```

---

## ‚ö° chruby: "–Ø –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—é Ruby"

**chruby** ‚Äî —ç—Ç–æ 100 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–µ –¥–µ–ª–∞—é—Ç —Ä–æ–≤–Ω–æ –æ–¥–Ω—É –≤–µ—â—å: –º–µ–Ω—è—é—Ç `$PATH`.

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (macOS)
brew install chruby ruby-install
```

### üëç –ü–ª—é—Å—ã:
- **–ë—ã—Å—Ç—Ä–µ–µ —Å–≤–µ—Ç–∞** (–Ω–∏–∫–∞–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –≤ shell)
- **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** (`chruby` –ø—Ä–æ—Å—Ç–æ –º–µ–Ω—è–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è)
- **"UNIX-way"** (–¥–µ–ª–∞–µ—Ç –æ–¥–Ω—É –≤–µ—â—å –∏ –¥–µ–ª–∞–µ—Ç –µ—ë —Ö–æ—Ä–æ—à–æ)

### üëé –ú–∏–Ω—É—Å—ã:
- **–ù–µ—Ç –∞–≤—Ç–æ-–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è** (–Ω—É–∂–µ–Ω `auto.sh` —Å–∫—Ä–∏–ø—Ç –¥–ª—è `.ruby-version`)
- **–ù–æ–ª—å —Ñ–∏—á** (—Ö–æ—Ç–∏—Ç–µ gemset'—ã? –ü–∏—à–∏—Ç–µ —Å–≤–æ–∏ —Å–∫—Ä–∏–ø—Ç—ã)

### üî• –î–ª—è —Ñ–∞–Ω–∞—Ç–æ–≤ –∫–æ–Ω—Ç—Ä–æ–ª—è:
```bash
# –í—Ä—É—á–Ω—É—é –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è
chruby 3.1.0

# –ò–ª–∏ —á–µ—Ä–µ–∑ —Ñ–∞–π–ª
echo "3.1.0" > .ruby-version
```

---

## üß™ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤ –±–æ—é

| –ö—Ä–∏—Ç–µ—Ä–∏–π          | RVM               | rbenv             | chruby            |
|-------------------|-------------------|-------------------|-------------------|
| –°–∫–æ—Ä–æ—Å—Ç—å          | üê¢                | üêá                | ‚ö°                |
| Gemset'—ã          | ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ     | ‚ùå –¢—Ä–µ–±—É–µ—Ç Bundler| ‚ùå –ù–µ—Ç            |
| –ê–≤—Ç–æ–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ  | ‚úÖ                | ‚úÖ                | ‚ùå (—Ç–æ–ª—å–∫–æ —Å –ø–ª–∞–≥–∏–Ω–∞–º–∏) |
| –í–ª–∏—è–Ω–∏–µ –Ω–∞ shell  | üî• –ü–µ—Ä–µ–ø–∏—Å—ã–≤–∞–µ—Ç   | üîÑ –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ    | ÔøΩ –ü–æ—á—Ç–∏ –Ω—É–ª–µ–≤–æ–µ   |
| –°–ª–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ª–∞–¥–∫–∏ | üò±                | üòä                | üòé                |

---

## üí° –ö–∞–∫–æ–π –≤—ã–±—Ä–∞—Ç—å?

- **–î–ª—è –Ω–æ–≤–∏—á–∫–æ–≤**: `rbenv` ‚Äî –±–∞–ª–∞–Ω—Å –ø—Ä–æ—Å—Ç–æ—Ç—ã –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- **–î–ª—è —ç–Ω—Ç–µ—Ä–ø—Ä–∞–π–∑–∞**: `RVM` ‚Äî –µ—Å–ª–∏ –Ω—É–∂–Ω—ã –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ gemset'—ã
- **–î–ª—è –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–æ–≤**: `chruby` ‚Äî –∫–æ–≥–¥–∞ —Ö–æ—á–µ—Ç—Å—è –∫–æ–Ω—Ç—Ä–æ–ª—è –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏

–õ–∏—á–Ω–æ –º–æ–π —Å—Ç–µ–∫:
```bash
# –ù–∞ —Ä–∞–±–æ—Ç–µ (–º–Ω–æ–≥–æ legacy-–ø—Ä–æ–µ–∫—Ç–æ–≤)
RVM + .rvmrc (–¥–∞, —è –∂–∏–≤—É –æ–ø–∞—Å–Ω–æ)

# –ù–∞ –ª–∏—á–Ω–æ–º MacBook
chruby + ruby-install + direnv

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö
rbenv (–ø–æ—Ç–æ–º—É —á—Ç–æ "–º–µ–Ω—å—à–µ –º–∞–≥–∏–∏ ‚Äî –∫—Ä–µ–ø—á–µ —Å–æ–Ω")
```

---

## üí• –ì–ª–∞–≤–Ω–∞—è –±–æ–ª—å –≤—Å–µ—Ö –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤

**Docker.**  
–ö–æ–≥–¥–∞ –≤—ã —Å–æ–±–∏—Ä–∞–µ—Ç–µ –æ–±—Ä–∞–∑, –≤—Å–µ —ç—Ç–∏ –º–µ–Ω–µ–¥–∂–µ—Ä—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –∏–∑–±—ã—Ç–æ—á–Ω—ã–º–∏. –õ—É—á—à–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞:

```dockerfile
FROM ruby:3.2.2-alpine # ‚Üê –í–æ—Ç –∏ –≤–µ—Å—å –≤–∞—à –º–µ–Ω–µ–¥–∂–µ—Ä
WORKDIR /app
COPY Gemfile* .
RUN bundle install
```

–ù–æ –ª–æ–∫–∞–ª—å–Ω–æ –±–µ–∑ –Ω–∏—Ö –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–∏–∫—É–¥–∞.

---

## üé§ –ß—Ç–æ —Å–∫–∞–∑–∞—Ç—å –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏

> ‚Äî –ö–∞–∫ –≤—ã —É–ø—Ä–∞–≤–ª—è–µ—Ç–µ –≤–µ—Ä—Å–∏—è–º–∏ Ruby –≤ –ø—Ä–æ–µ–∫—Ç–µ?

‚Äî –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º `rbenv` —Å `ruby-build` –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ñ–∏–∫—Å–∏—Ä—É–µ–º –≤–µ—Ä—Å–∏—é –≤ `Dockerfile` –¥–ª—è –ø—Ä–æ–¥–∞. –î–ª—è gemset'–æ–≤ –ø–æ–ª–∞–≥–∞–µ–º—Å—è –Ω–∞ Bundler ‚Äî —ç—Ç–æ –¥–∞—ë—Ç –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å –∏ –≤ dev, –∏ –≤ prod.

---

## üßæ –í—ã–≤–æ–¥

–í—ã–±–æ—Ä –º–µ–Ω–µ–¥–∂–µ—Ä–∞ ‚Äî –∫–∞–∫ –≤—ã–±–æ—Ä —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞:  
- **RVM** ‚Äî —ç—Ç–æ –∫–∞–∫ IDE: –º–æ—â–Ω–æ, –Ω–æ —Ç—è–∂–µ–ª–æ  
- **rbenv** ‚Äî VS Code: –±–∞–ª–∞–Ω—Å —Ñ—É–Ω–∫—Ü–∏–π –∏ –ø—Ä–æ—Å—Ç–æ—Ç—ã  
- **chruby** ‚Äî Vim: –º–∏–Ω–∏–º–∞–ª–∏–∑–º –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ –∑–Ω–∞–µ—Ç, —á—Ç–æ –¥–µ–ª–∞–µ—Ç  
